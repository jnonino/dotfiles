#!/usr/bin/env bash

#####################
# Functions for Linux
#####################
{{ if eq .chezmoi.os "linux" }}

set -eEuo pipefail

# Update and Upgrade
sudo apt-get update
sudo apt-get upgrade

# Instal system deps
# sudo apt install build-essential curl file -y

###################
# Brew dependencies
#   Install packages
#   Brewfile hash: {{ include ".files/Brewfile" | sha256sum }}
###################
brew update
brew bundle --verbose --debug --file {{ joinPath .chezmoi.sourceDir ".files/Brewfile" | quote }}
brew upgrade
brew autoremove
brew cleanup

###################
# Specific commands
###################
{{ if (.chezmoi.kernel.osrelease | lower | contains "microsoft") }} # WSL specific functions

{{ else }} # Not WSL specific functions

{{ end }}

{{ end }}
